@model AdminDashboardViewModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Admin Dashboard</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="container-fluid mt-4">
        @Html.Partial("_Logo")
        <h1 class="mb-4">Admin Dashboard</h1>

        <div class="container-fluid">

            <!-- ============================= -->
            <!-- ROW 1 : KPI NUMBERS -->
            <!-- ============================= -->
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card text-center">
                        <div class="card-body">
                            <h6>Total Swipes</h6>
                            <h2>@Model.TotalSwipes</h2>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card text-center">
                        <div class="card-body">
                            <h6>Average Swipes per Session</h6>
                            <h2>@Model.AverageSwipesPerSession.ToString("0.00")</h2>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============================= -->
            <!-- ROW 2 : BAR CHARTS -->
            <!-- ============================= -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h6>Number of Sessions</h6>
                            <canvas id="sessionsChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h6>Number of Swipes</h6>
                            <canvas id="swipesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============================= -->
            <!-- ROW 3 : REGISTRATIONS -->
            <!-- ============================= -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h6>Registrations</h6>
                            <canvas id="registrationsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============================= -->
            <!-- ROW 4 : PIE CHARTS -->
            <!-- ============================= -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h6>Preferred Streaming Platform</h6>
                            <canvas id="platformChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h6>Mobile vs Desktop</h6>
                            <canvas id="deviceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============================= -->
            <!-- ROW 5 : LISTS -->
            <!-- ============================= -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h6>Most Popular Genres</h6>
                            <ul class="list-group">
                                @foreach (var genre in Model.MostPopularGenres)
                                {
                                    <li class="list-group-item">@genre</li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ============================= -->
            <!-- ROW 6 : MOST LIKED TRACKS -->
            <!-- ============================= -->
            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-body">
                            <h6>Most Right-Swiped Tracks</h6>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Track</th>
                                        <th>Artist</th>
                                        <th>Likes</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var track in Model.MostRightSwipedTracks)
                                    {
                                        <tr>
                                            <td>@track.TrackName</td>
                                            <td>@track.ArtistName</td>
                                            <td>@track.Likes</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- ============================= -->
        <!-- CHART SCRIPTS -->
        <!-- ============================= -->
        <script>
            new Chart(document.getElementById('sessionsChart'), {
                type: 'bar',
                data: {
                    labels: @Html.Raw(Json.Serialize(Model.SessionsPerDay.Select(x => x.Label))),
                    datasets: [{
                        label: 'Sessions',
                        data: @Html.Raw(Json.Serialize(Model.SessionsPerDay.Select(x => x.Value)))
                            }]
                }
            });

            new Chart(document.getElementById('swipesChart'), {
                type: 'bar',
                data: {
                    labels: @Html.Raw(Json.Serialize(Model.SwipesPerDay.Select(x => x.Label))),
                    datasets: [{
                        label: 'Swipes',
                        data: @Html.Raw(Json.Serialize(Model.SwipesPerDay.Select(x => x.Value)))
                            }]
                }
            });

            new Chart(document.getElementById('registrationsChart'), {
                type: 'bar',
                data: {
                    labels: @Html.Raw(Json.Serialize(Model.RegistrationsPerDay.Select(x => x.Label))),
                    datasets: [{
                        label: 'Registrations',
                        data: @Html.Raw(Json.Serialize(Model.RegistrationsPerDay.Select(x => x.Value)))
                            }]
                }
            });

            new Chart(document.getElementById('platformChart'), {
                type: 'pie',
                data: {
                    labels: @Html.Raw(Json.Serialize(Model.PreferredStreamingPlatforms.Select(x => x.Label))),
                    datasets: [{
                        data: @Html.Raw(Json.Serialize(Model.PreferredStreamingPlatforms.Select(x => x.Value)))
                            }]
                }
            });

            new Chart(document.getElementById('deviceChart'), {
                type: 'pie',
                data: {
                    labels: @Html.Raw(Json.Serialize(Model.DeviceTypeDistribution.Select(x => x.Label))),
                    datasets: [{
                        data: @Html.Raw(Json.Serialize(Model.DeviceTypeDistribution.Select(x => x.Value)))
                            }]
                }
            });
        </script>

    </div>

</body>
</html>




